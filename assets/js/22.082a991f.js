(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{473:function(e,_,n){"use strict";n.r(_);var t=n(13),d=Object(t.a)({},(function(){var e=this,_=e.$createElement,n=e._self._c||_;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"реалізація-інформаціиного-та-програмного-забезпечення"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#реалізація-інформаціиного-та-програмного-забезпечення"}},[e._v("#")]),e._v(" Реалізація інформаційного та програмного забезпечення")]),e._v(" "),n("p",[e._v("В рамках проекту розробляється:")]),e._v(" "),n("ul",[n("li",[e._v("SQL-скрипт для створення на початкового наповнення бази даних")]),e._v(" "),n("li",[e._v("RESTfull сервіс для управління даними")])]),e._v(" "),n("h1",{attrs:{id:"реалізація-інформаціиного-та-програмного-забезпечення-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#реалізація-інформаціиного-та-програмного-забезпечення-2"}},[e._v("#")]),e._v(" Реалізація інформаційного та програмного забезпечення")]),e._v(" "),n("p",[e._v("В рамках проекту розробляється:")]),e._v(" "),n("ul",[n("li",[e._v("SQL-скрипт для створення на початкового наповнення бази даних")]),e._v(" "),n("li",[e._v("RESTfull сервіс для управління даними")])]),e._v(" "),n("p",[e._v("-- MySQL Script generated by MySQL Workbench\n-- Sun Dec 25 07:19:21 2022\n-- Model: New Model    Version: 1.0\n-- MySQL Workbench Forward Engineering")]),e._v(" "),n("p",[e._v("SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;\nSET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;\nSET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Schema mydb")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP SCHEMA IF EXISTS "),n("code",[e._v("mydb")]),e._v(" ;")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Schema mydb")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("CREATE SCHEMA IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v(" DEFAULT CHARACTER SET utf8 ;\nUSE "),n("code",[e._v("mydb")]),e._v(" ;")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("answer")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("answer")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("answer")]),e._v(" (\n"),n("code",[e._v("user_id")]),e._v(" INT NOT NULL,\n"),n("code",[e._v("text")]),e._v(" TEXT NOT NULL,\n"),n("code",[e._v("data")]),e._v(" DATE NOT NULL,\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\n"),n("code",[e._v("answer_id")]),e._v(" INT NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("),\nINDEX "),n("code",[e._v("fk_selectedOption_id_idx")]),e._v(" ("),n("code",[e._v("answer_id")]),e._v(" ASC) VISIBLE,\nINDEX "),n("code",[e._v("fk_user_id_idx")]),e._v(" ("),n("code",[e._v("user_id")]),e._v(" ASC) VISIBLE,\nCONSTRAINT "),n("code",[e._v("fk_selectedOption_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("answer_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("selectedOption")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION,\nCONSTRAINT "),n("code",[e._v("fk_user_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("user_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("user")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION);")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("category")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("category")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("category")]),e._v(" (\n"),n("code",[e._v("category_id")]),e._v(" INT NOT NULL,\n"),n("code",[e._v("name")]),e._v(" VARCHAR(255) NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("category_id")]),e._v("));")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("option")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("option")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("option")]),e._v(" (\n"),n("code",[e._v("type")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("text")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\n"),n("code",[e._v("question_id")]),e._v(" INT NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("),\nINDEX "),n("code",[e._v("fk_question_id_idx")]),e._v(" ("),n("code",[e._v("question_id")]),e._v(" ASC) VISIBLE,\nCONSTRAINT "),n("code",[e._v("fk_question_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("question_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("question")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION);")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("question")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("question")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("question")]),e._v(" (\n"),n("code",[e._v("type")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("text")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\n"),n("code",[e._v("topic")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("quiz_id")]),e._v(" INT NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("),\nINDEX "),n("code",[e._v("fk_quiz_id_idx")]),e._v(" ("),n("code",[e._v("quiz_id")]),e._v(" ASC) VISIBLE,\nCONSTRAINT "),n("code",[e._v("fk_quiz_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("quiz_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("quiz")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION);")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("quiz")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("quiz")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("quiz")]),e._v(" (\n"),n("code",[e._v("type")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("text")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\n"),n("code",[e._v("topic")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("date")]),e._v(" DATETIME NOT NULL,\n"),n("code",[e._v("creator_id")]),e._v(" INT NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("),\nINDEX "),n("code",[e._v("fk_creator_id_idx")]),e._v(" ("),n("code",[e._v("creator_id")]),e._v(" ASC) VISIBLE,\nCONSTRAINT "),n("code",[e._v("fk_creator_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("creator_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("user")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION);")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("selectedOption")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("selectedOption")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("selectedOption")]),e._v(" (\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\n"),n("code",[e._v("option_id")]),e._v(" INT NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("),\nINDEX "),n("code",[e._v("fk_option_id_idx")]),e._v(" ("),n("code",[e._v("option_id")]),e._v(" ASC) VISIBLE,\nCONSTRAINT "),n("code",[e._v("fk_option_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("option_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("option")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION);")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("user")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("user")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("user")]),e._v(" (\n"),n("code",[e._v("username")]),e._v(" VARCHAR(16) NOT NULL,\n"),n("code",[e._v("mail")]),e._v(" VARCHAR(255) NOT NULL,\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("));")]),e._v(" "),n("p",[e._v("SET SQL_MODE=@OLD_SQL_MODE;\nSET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;\nSET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;")]),e._v(" "),n("h1",{attrs:{id:"фаил-server-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#фаил-server-js"}},[e._v("#")]),e._v(" Файл server.js")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const express = require("express");\nconst Controllers = require("./controllers");\nconst app = express();\nconst jsonParse = express.json();\n\napp.get("/quiz/:id", Controllers.getQuiz);\n\napp.get("/quizzes/", Controllers.getQuizzes);\n\napp.get("/userquizzes/:id", Controllers.getUserQuizzes);\n\napp.post("/quiz/", jsonParse, Controllers.createQuiz);\n\napp.delete("/quiz/:id", Controllers.deleteQuiz);\n\napp.put("/quiz/:id", jsonParse, Controllers.updateQuiz);\n\napp.listen(2222);\n')])])]),n("h1",{attrs:{id:"фаил-controllers-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#фаил-controllers-js"}},[e._v("#")]),e._v(" Файл controllers.js")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const Model = require("./models");\n\nclass Controllers {\n  static resHandler = (res, data) => {\n    if (data) {\n      res.send(data);\n    } else {\n      res.sendStatus(404);\n    }\n  };\n  static getQuiz = async (req, res) => {\n    await Model.getQuizById(req.params).then((result) => {\n      this.resHandler(res, result);\n    });\n  };\n  static getQuizzes = async (req, res) => {\n    await Model.getAllQuizzes().then((result) => {\n      this.resHandler(res, result);\n    });\n  };\n  static getUserQuizzes = async (req, res) => {\n    await Model.getQuizzesByUserId(req.params).then((result) => {\n      this.resHandler(res, result);\n    });\n  };\n  static createQuiz = async (req, res) => {\n    if (!req.body) return res.sendStatus(400);\n    const id = Math.ceil(Math.random() * (100 - 1) * Math.random() * (100 - 1));\n    const date = Date.now();\n    await Model.postQuiz({ id, date, ...req.body })\n      .then(() => Model.getQuizById({ id }))\n      .then((result) => {\n        this.resHandler(res, result);\n      });\n  };\n  static deleteQuiz = async (req, res) => {\n    await Model.deleteQuizById(req.params).then((result) => {\n      this.resHandler(res, result);\n    });\n  };\n  static updateQuiz = async (req, res) => {\n    if (!req.body) return res.sendStatus(400);\n    const date = Date.now();\n    await Model.updateQuizById(req.params, { date, ...req.body })\n      .then(() => Model.getQuizById(req.params))\n      .then((result) => {\n        this.resHandler(res, result);\n      });\n  };\n}\n\nmodule.exports = Controllers;\n')])])]),n("h1",{attrs:{id:"фаил-models-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#фаил-models-js"}},[e._v("#")]),e._v(" Файл models.js")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const { pool } = require("./pool");\n\nclass Model {\n  static processingFunction = (sql) => {\n    return new Promise((resolve) => {\n      pool.connect(function(err) {\n        if (err) throw err;\n        return pool.query(sql, (err, result) => {\n          if (err) throw err;\n          resolve(result);\n        });\n      });\n    });\n  };\n  static sqlHandler = {\n    getById: ({ id }) => `SELECT * FROM mydb.quiz WHERE id = ${id}`,\n    getAll: () => `SELECT * from mydb.quiz`,\n    getByUserId: ({ id }) => `SELECT * from mydb.quiz WHERE creator_id = ${id}`,\n    create: ({ id, creator_id, type, text, topic, date }) =>\n      `INSERT INTO mydb.quiz (id, type, text, creator_id, topic, date) VALUES (${id},\\"${type}\\", \\"${text}\\", ${creator_id}, \\"${topic}\\", ${date})`,\n    delete: ({ id }) => `DELETE FROM mydb.quiz WHERE id = ${id}`,\n    update: ({ id }, { type, text, topic, date }) =>\n      `UPDATE mydb.quiz SET type = \\"${type}\\", text = \\"${text}\\", topic = \\"${topic}\\", date = ${date} WHERE id = ${id} `,\n  };\n  static getQuizById = (data) => {\n    return this.processingFunction(this.sqlHandler.getById(data));\n  };\n  static getAllQuizzes = () => {\n    return this.processingFunction(this.sqlHandler.getAll());\n  };\n  static getQuizzesByUserId = (data) => {\n    return this.processingFunction(this.sqlHandler.getByUserId(data));\n  };\n  static postQuiz = (data) => {\n    return this.processingFunction(this.sqlHandler.create(data));\n  };\n  static deleteQuizById = (data) => {\n    return this.processingFunction(this.sqlHandler.delete(data)).then(\n      () => `Quiz(id: ${data.id}) was deleted!`\n    );\n  };\n  static updateQuizById = (params, data) => {\n    return this.processingFunction(this.sqlHandler.update(params, data));\n  };\n}\n\nmodule.exports = Model;\n')])])]),n("h1",{attrs:{id:"фаил-pool-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#фаил-pool-js"}},[e._v("#")]),e._v(" Файл pool.js")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const mysql = require("mysql2");\n\nconst connectionOptions = {\n  host: "localhost",\n  user: "root",\n  password: "olegoofy",\n  database: "mydb",\n};\n\nconst pool = mysql.createConnection(connectionOptions);\n\nmodule.exports = { pool };\n')])])])])}),[],!1,null,null,null);_.default=d.exports}}]);